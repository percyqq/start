电话面试（基础知识为主，约 2 小时）：

1、先自我介绍，包含日常工作
2、基础知识
1）多线程（ThreadLocal（问了父子线程怎么共享数据 interitableThreadLocals）、
    lock 和 sync 区别（问 HashMap1.7、1.8 区别时带出）、AQS 原理（执行过程源码，入队出队的细节，源码细节）、
    CountDownLatch 和 CyclicBarrier 的区别是什么源码级别、volatile 从指令重排序，内存屏障，聊到总线风暴）所占比重较大
2）数据库（mysql 索引（聚集索引、非聚集索引、索引结构（顺带会问各种树的特性）、执行计划、count1 * 区别、
    举例优化 sql、MVCC 和事务隔离级别的关系、间隙锁、行锁（和多线程混合问的，乐观锁悲观锁等）、
    唯一索引和普通索引的区别聊到了 changeBuffer，聊了页分裂合页合并）比重较大
3）jvm 调优（可达性分析算法中根节点有哪些、cms 和 G1 区别、怎样 GC 调优、怎样排查 CPU 彪高、内存彪高、逃逸分析）
4）redis 数据结构、跳跃表、redis qps 能上多少，怎么知道的、sentinel 和 cluster 区别和各自适用场景、
    redis cluster 集群同步过程、redis 单线程为什么快、多大叫大 key、热 key 产生原因和后果以及怎么解决、本地缓存需要高时效性怎么办.....
5）spring 的作用、spring 循环依赖怎么解决（说出三级缓存源码细节）、spring aop 原理（动态代理）、
    spring bean 生命周期（源码细节，以及各个位置的设计思路，有什么可扩展的）
6）dubbo 服务暴露和引用过程，负载均衡策略，容错机制在哪里实现的源码
7）项目中碰到的问题。
8）为什么换工作，如果通过会直接说有笔试题，和你确认笔试时间。

第二轮
笔试两道题，第一题写代码，第二题写技术方案，以查询为主，考察锁粒度、时间粒度上的细节点。

第三轮
电话面试（解决方案为主，约 1.5 个小时） 
1、自我介绍、项目介绍
2、说到缓存穿透，让我设计一个防止缓存穿透的解决方案，简单的就是存 null 值，但肯定会深究，可以结合布隆过滤器，
    设计分布式系统，里面又会问到流量分发到具体过滤器服务的方式，比如一致性 hash 算法，怎么调用？比如 dubbo 直连、等等细节会边说边问。
3、有没有做限流，设计一个侵入性最小的限流服务。
4、项目中碰到的问题，最好说框架本身问题，能提现个人能力，也避免问题太低级被面试官看 low，
    刚好之前有发现一个 dubbo 的 bug，所以这问题应该回答的还可以。
5、为什么换工作，每轮都会问，这个得想好。

第四轮
电话面试（项目为主，40 分钟，应该是交叉面，问的不算多）
1、介绍最熟悉的项目，业务上有没有什么优化点；和同行业其他公司的差距和优势（估计是 P7 的标准问题吧。。。我是没咋说好）
2、dubbo 服务调用过程（说着说着说到服务暴露和引用上面，他直接说这个之前问过了。。不用重复说，所以面试应该有记录面试问题）
3、NIO、BIO 区别，NIO 解决了什么问题，Netty 线程模型（源码拷问）。
4、MQ 相关（RocketMQ、kafaka 奇怪的是你写啥面试官问啥，面试官啥都会，技术广度深度令人发指）

第五轮
电话面试（这位面试官比较较真，什么问题都会问具体数值，但和他挺聊得来的，向他请教阿里那边方案也会耐心指导，1.5 小时）
1、项目介绍
2、听到说做了限流，限流标准（并发数？ qps？并发数和 qps 关系？说出了 5 种限流方案和对应算法原理）
3、dubbo 调用端怎么在 jvm 中生成对应服务？dubbo 服务端和调用端超时时间设置和区别、dubbo 长连接。
3、mysql 行锁最大并发数？（秒杀项目指出）
4、设计秒杀系统，我说的异步的方式，会问怎么优化？改为了同步的方式，异步和同步区别？ 然后我也问了阿里那边
5、碰到哪些技术难点？怎么解决？有没有参考其他大厂？其他大厂方案什么样的？有没有关注阿里这边最新的技术？
6、刚刚的秒杀系统，会涉及到多个库表的更新，分布式事务怎么解决，我说的消息最终一致性，异步？有没有更好的方案？同步 TCC 方式，TCC 方式原理？（三个阶段的具体实现）
以上是技术面。

第六轮
主管视频面试：个人介绍、项目介绍为主，十五分钟结束。

第七轮
HR 面试，项目介绍、职位介绍、离职原因、当前薪资，如果没什么问题，一天后会电话反馈待遇并确认是否接受。
不会问期望薪资是多少，后面会打电话告诉你评级是否接受，然后就开始安排体检了。

总结
面试整体难度中上，因为朋友对 dubbo 源码的研读比较深，所以基本上每一面都很加分，多线程环境都是常规问题，能回答道计算机底层就很加分了。
这次面试比较突然，他也没准备，全靠平时积累了，所以中间有些描述技术细节和项目的地方他觉得没回答好。
大家如果要面试得好好准备一番，特别是那些常规问题，有啥想问我的？为啥跳槽？等等
最近我事情比较多，你们也知道的，视频和文章可能都输出没那么高，希望大家理解。


项目中难点及解决办法

Java线程的状态及转换

Java创建线程的方式

创建线程池的方式有哪些

JUC包下的类，能说多少说多少

ReentranLock与sychronized的区别

volitile的内存语义，底层如何实现
    https://mp.weixin.qq.com/s/38Uz9Fj1gu3W347S_IWVZg
    1.JMM 与 JVM 内存结构有什么区别？
        JVM 内存结构和 Java 虚拟机的运行时区域有关；
        Java 内存模型和 Java 的并发编程有关。
        如图：
       ——————————————————————————————————        —————————————             ——————————————————
       | 本地方法栈（Native method stacks）|       | java虚拟机栈 |            |                |
       ——————————————————————————————————        —————————————             |                |
        ———————————————————————————————————————————————————————            |                |
        |                    程序计数器                         |            |                |
        ———————————————————————————————————————————————————————            |                |
        ————————————————————————————————————————————————————————           |   堆 （heap）   |
        |  ---------------------------------                   |           |                |
        |  |   《元空间 Metaspace            |     本地内存       |           |                |
        |  ！                  ——————————   ！     —————————    |           |                |
        |  ！                  | 方法区  |   |     | 直接内存 |   |           |                |
        |  ！                  —————————    ！     —————————    |           |                |
        |  ---------------------------------                   |           |                |
        ————————————————————————————————————————————————————————           ——————————————————
        
        
        
        
        
    到底什么是 JMM (Java Memory Model) 内存模型，JMM 的跟并发编程有什么关系？
    内存模型最重要的内容：指令重排、原子性、内存可见性。
    volatile 内存可见性指的是什么？它的运用场景以及常见错误使用方式避坑指南。
    分析 synchronized 实现原理跟 monitor 的关系；

解释一下happens-before，有哪些规则

CurrentHashMap源码

MySQL的索引及区别

算法题：顺时针打印矩阵


